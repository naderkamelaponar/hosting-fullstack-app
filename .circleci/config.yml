  version: 2.1
  orbs:
    # orgs contain basc recipes and reproducible actions (install node, aws, etc.)
    node: circleci/node@5.0.2
    # different jobs are calles later in the workflows sections
  jobs:
    build:
      docker:
        # the base image can run most needed actions with orbs
        - image: "cimg/base:stable"
      steps:
        - checkout
        - node/install:
           install-yarn: true
        # install dependencies in both apps
        - run:
            name: First
            command: |
              echo "بسم الله الرحمن الرحيم"
        # BACK END INSTALLATION
        - run: 
            name: API Install
            command: |
              npm run api:install
        # BACK END build
        - run: 
            name: API BUILD
            command: |
              npm run api:build
        # FRONT END INSTALLATION
        - run: 
            name: Front-End Install
            command: |
              npm run frontend:install
        # FRONT END BUILD
        - run: 
            name: Front-End BUILD
            command: |
              npm run frontend:build
        # FRONT END test
        - run: 
            name: Front-End test
            command: |
              npm run frontend:test